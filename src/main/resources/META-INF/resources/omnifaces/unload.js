var OmniFaces=OmniFaces||{};
OmniFaces.Unload=function(n,t){function e(){for(var n=0;n<t.forms.length;n++){var e=t.forms[n][i];if(e)return e.value}return null}function a(n,t,e){n.addEventListener?n.addEventListener(t,e,!1):n.attachEvent&&n.attachEvent("on"+t,e)}var i="javax.faces.ViewState",o=!1,r={};return r.init=function(u){if(n.XMLHttpRequest){var c=e();c&&(a(n,"beforeunload",function(){if(o)return void(o=!1);try{var t=new XMLHttpRequest;t.open("POST",n.location.href.split(/[?#;]/)[0],!1),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("omnifaces.event=unload&id="+u+"&"+i+"="+c)}catch(e){}}),a(t,"submit",function(){r.disable()}))}},r.disable=function(){o=!0},r}(window,document);