var OmniFaces=OmniFaces||{};
OmniFaces.Unload=function(n,e){function t(){for(var n=0;n<e.forms.length;n++){var t=e.forms[n][i];if(t)return t.value}return null}function a(n,e,t){n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent&&n.attachEvent("on"+e,t)}var i="javax.faces.ViewState",o=!1,r={};return r.init=function(c){if(n.XMLHttpRequest){var u=t();u&&(a(n,"beforeunload",function(){if(o)return void(o=!1);try{var e=new XMLHttpRequest;e.open("POST",n.location.href.split(/[?#;]/)[0],!1),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("omnifaces.event=unload&id="+c+"&"+i+"="+encodeURIComponent(u))}catch(t){}}),a(e,"submit",function(){r.disable()}))}},r.disable=function(){o=!0},r}(window,document);