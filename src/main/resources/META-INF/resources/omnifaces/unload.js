var OmniFaces=OmniFaces||{};
OmniFaces.Unload=function(e,n){function t(){for(var e=0;e<n.forms.length;e++){var t=n.forms[e][r];if(t)return t.value}return null}function a(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent&&e.attachEvent("on"+n,t)}function i(e,n){var t=e[n];t&&(e[n]=function(){return c.disable(),t.apply(this,arguments)})}var r="javax.faces.ViewState",o=!1,c={};return c.init=function(s){if(e.XMLHttpRequest){var u=t();u&&(a(e,"beforeunload",function(){if(o)return void(o=!1);try{var n=new XMLHttpRequest;n.open("POST",e.location.href.split(/[?#;]/)[0],!1),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send("omnifaces.event=unload&id="+s+"&"+r+"="+encodeURIComponent(u))}catch(t){}}),a(n,"submit",function(){c.disable()}),e.mojarra&&i(mojarra,"jsfcljs"),e.myfaces&&i(myfaces.oam,"submitForm"),e.PrimeFaces&&i(PrimeFaces,"addSubmitParam"))}},c.disable=function(){o=!0},c}(window,document);