var OmniFaces=OmniFaces||{};
OmniFaces.Unload=function(){function n(){for(var n=0;n<document.forms.length;n++){var e=document.forms[n][o];if(e)return e.value}return null}function e(n,e,t){n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent&&n.attachEvent("on"+e,t)}var t={},a=!1,o="javax.faces.ViewState";return t.init=function(){if(window.XMLHttpRequest){var t=n();t&&(e(window,"beforeunload",function(){if(a)return void(a=!1);try{var n=new XMLHttpRequest;n.open("POST",document.location,!1),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send("omnifaces.event=unload&"+o+"="+t)}catch(e){}}),e(document,"submit",function(){OmniFaces.Unload.disable()}))}},t.disable=function(){a=!0},t}();